# Forum Scraper - –°–∫—Ä–∞–ø–µ—Ä —Ñ–æ—Ä—É–º–∞ Dota 2

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ
–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–æ—Ä—É–º–∞ dota2.ru —Å –ø–∞–Ω–µ–ª—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç–æ–ø–∏–∫–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
scrapdota/
‚îú‚îÄ‚îÄ components/          # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI
‚îÇ   ‚îú‚îÄ‚îÄ icons/          # SVG –∏–∫–æ–Ω–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx
‚îÇ   ‚îú‚îÄ‚îÄ SettingsPanel.tsx  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, —Ñ–æ—Ä—É–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ ResultsFeed.tsx    # –õ–µ–Ω—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
‚îÇ   ‚îî‚îÄ‚îÄ PostCard.tsx       # –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å—Ç–∞
‚îú‚îÄ‚îÄ server/             # Backend (Node.js + Express)
‚îÇ   ‚îú‚îÄ‚îÄ server.ts       # WebSocket —Å–µ—Ä–≤–µ—Ä + –º–æ–∫-–¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ scraper.ts      # Playwright scraper (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
‚îÇ   ‚îî‚îÄ‚îÄ types.ts        # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ App.tsx             # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ types.ts            # –û–±—â–∏–µ —Ç–∏–ø—ã
‚îî‚îÄ‚îÄ package.json
```

## ‚öôÔ∏è –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- **–ú–æ–∫-–¥–∞–Ω–Ω—ã–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **WebSocket**: –°–≤—è–∑—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–±—ç–∫–µ–Ω–¥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ü—É—Å–∫/–ü–∞—É–∑–∞, –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–π—á–∞—Å, –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
- **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–∏–º
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫)
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: –ü–æ –¥–∞—Ç–µ / –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É
- **–£–¥–∞–ª–µ–Ω–∏–µ**: –û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ—Å—Ç—ã –∏ –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ–π –ª–µ–Ω—Ç—ã
- **–°—á—ë—Ç—á–∏–∫**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **–†–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥**: Playwright scraper –¥–ª—è dota2.ru (–ø—Ä–æ–±–ª–µ–º–∞: —Ñ–æ—Ä—É–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JS, –Ω—É–∂–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)

## üöÄ –ó–∞–ø—É—Å–∫

### Backend
```bash
cd server
npm install
npm run dev  # –ü–æ—Ä—Ç 8080
```

### Frontend
```bash
npm install
npm run dev  # –ü–æ—Ä—Ç 3000
```

### –ë—Ä–∞—É–∑–µ—Ä
–û—Ç–∫—Ä—ã—Ç—å: http://localhost:3000

## üîß –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

–í `server/server.ts`:
```typescript
const USE_MOCK_DATA = true;  // false –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
const SCRAPE_INTERVAL = 5 * 60 * 1000;  // –ò–Ω—Ç–µ—Ä–≤–∞–ª (–º—Å)
```

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Frontend**: React 19, TypeScript, Vite, Tailwind CSS
- **Backend**: Node.js, Express, WebSocket (ws)
- **Scraper**: Playwright (Chromium)
- **–ü–∞—Ä—Å–∏–Ω–≥**: –§–æ—Ä—É–º dota2.ru/forum/forums/obmen-predmetami-dota-2.910/

## üìù –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (`App.tsx`)
- WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (–ø–æ—Å—Ç—ã, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, —Ñ–æ—Ä—É–º—ã)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: `INIT_STATE`, `NEW_POST`, `POST_DELETED`, `POSTS_CLEARED`

### –ë—ç–∫–µ–Ω–¥ (`server/server.ts`)
- WebSocket —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8080
- –ö–æ–º–∞–Ω–¥—ã: `START_SCRAPING`, `STOP_SCRAPING`, `REFRESH_NOW`, `ADD_KEYWORD`, `DELETE_POST`, `CLEAR_POSTS`
- –ú–æ–∫-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–æ—Å—Ç–æ–≤ —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏ (60%) –∏ –±–µ–∑ (40%)

### Scraper (`server/scraper.ts`)
- –ö–ª–∞—Å—Å `ForumScraper` —Å Playwright
- –ú–µ—Ç–æ–¥—ã: `initialize()`, `scrapeTopics(keywords)`, `parseTopicContent()`, `extractSteamId()`
- **–ü—Ä–æ–±–ª–µ–º–∞**: –§–æ—Ä—É–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JS, —Å–µ–ª–µ–∫—Ç–æ—Ä—ã `.forum__block-topic-title` –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞–ø—Ä—è–º—É—é, –Ω—É–∂–µ–Ω –∫–ª–∏–∫ ‚Üí –Ω–∞–≤–∏–≥–∞—Ü–∏—è

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Playwright scraper**: –î–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, timeout'—ã
2. **–§–æ—Ä—É–º dota2.ru**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (JS), –Ω—É–∂–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
3. **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∏–∫–∏ –ø–æ –±–ª–æ–∫–∞–º ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞–∑–∞–¥

## üìå TODO
- [ ] –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å Playwright scraper –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ Steam ID –∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ç–æ–ø–∏–∫–æ–≤
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–∞—Ö
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üë§ Git
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/tsanatsan/scrapdota
- User: –°–µ—Ä–≥–µ–π –≠–¥—É–∞—Ä–¥–æ–≤–∏—á (tsanatsan@outlook.com)

## üîë Env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è –º–æ–∫-—Ä–µ–∂–∏–º–∞. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ - –Ω–µ—Ç –æ—Å–æ–±—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.

---
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω —Å –Ω—É–ª—è, —Å—Ç–∞—Ä—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã, –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤.
